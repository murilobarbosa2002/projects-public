var _dominio = window.location.protocol+'//'+window.location.host+'/';var function_ajax_form = function(seletor,callback){    var form = document.querySelector(seletor);    form.addEventListener("submit", function(event){        event.preventDefault();        var form = this;        var oData = new FormData(form);        ajax_function(oData, form.action, callback);    });}var limpar_form_class = function(){    $('.has-success.control-label').remove();    $('.has-error.control-label').remove();    $('.has-warning.control-label').remove();    $('.control-label.label-margin').remove();    $('div').removeClass('has-error');}var ajax_function = function(oData, Action, callback){    var oReq = new XMLHttpRequest();    oReq.open("POST", Action, true);    oReq.setRequestHeader('Accept', 'application/json');    oReq.setRequestHeader('X-Requested-With', 'XMLHttpRequest');    limpar_form_class();    $('input').attr("disabled", true);    $('textarea').attr("disabled", true);    $('select').attr("disabled", true);    $('button').prepend('<i class="fa fa-spin fa-refresh"></i>').attr("disabled", true);    oReq.onload = function(oEvent) {        if (oReq.status === 200) {            json = oReq.responseText;            $('.fa.fa-spin.fa-refresh').remove();            $('button').removeAttr("disabled");            $('input').removeAttr("disabled");            $('textarea').removeAttr("disabled");            $('select').removeAttr("disabled");            if (json !== '') {                var json = JSON.parse(json);                callback(json);            }        }    };    oReq.send(oData);}var callbackFaleConosco = function(data){    if (data.success) {        $('input').val('');        $('textarea').val('');        $.each(data.success, function() {            var context = '<div class="has-success control-label" for="'+this.input+'"> '+this.message+'</div> ';            $('#fale_conosco').after(context);        });    }    if (data.warning) {        var context = '<div class="has-warning control-label"> '+data.warning.message+'</div> ';        $('#fale_conosco').after(context);        $('input').val('');        $('textarea').val('');    }    if (data.error) {        $.each(data.error, function() {            var context = '<label class="has-error control-label label-margin" for="'+this.input+'"> '+this.message+'</label> ';            $('#fale_conosco input[name="'+this.input+'"]').before(context).addClass('has-error');            $('#fale_conosco textarea[name="'+this.input+'"]').before(context).addClass('has-error');        });    }}var formFaleConosco = $('#fale_conosco');if (formFaleConosco.length>0) {    function_ajax_form('#fale_conosco',callbackFaleConosco);}var callbackNewsletters = function(data){    if (data.success) {        $('input').val('');        $('textarea').val('');        $.each(data.success, function() {            var context = '<div class="has-success control-label" for="'+this.input+'"> '+this.message+'</div> ';            $('#newsletters').after(context);        });    }    if (data.warning) {        var context = '<div class="has-warning control-label"> '+data.warning.message+'</div> ';        $('#newsletters').after(context);        $('input').val('');        $('textarea').val('');    }    if (data.error) {        $.each(data.error, function() {            var context = '<label class="has-error control-label label-margin" for="'+this.input+'"> '+this.message+'</label> ';            $('#newsletters input[name="'+this.input+'"]').parent().before(context);            $('#newsletters input[name="'+this.input+'"]').parent().addClass('has-error');            $('#newsletters textarea[name="'+this.input+'"]').parent().before(context);            $('#newsletters textarea[name="'+this.input+'"]').parent().addClass('has-error');        });    }}var formNewsletters = $('#newsletters');if (formNewsletters.length>0) {    function_ajax_form('#newsletters',callbackNewsletters);}var callbackContatos = function(data){    if (data.success) {        $('input').val('');        $('textarea').val('');        $.each(data.success, function() {            var context = '<div class="has-success control-label" for="'+this.input+'"> '+this.message+'</div> ';            $('#contatos').after(context);        });    }    if (data.warning) {        var context = '<div class="has-warning control-label"> '+data.warning.message+'</div> ';        $('#contatos').after(context);        $('input').val('');        $('textarea').val('');    }    if (data.error) {        $.each(data.error, function() {            var context = '<div class="has-error control-label label-margin" for="'+this.input+'"> '+this.message+'</div> ';            $('#contatos input[name="'+this.input+'"]').before(context);            $('#contatos input[name="'+this.input+'"]').addClass('has-error');            $('#contatos textarea[name="'+this.input+'"]').before(context);            $('#contatos textarea[name="'+this.input+'"]').addClass('has-error');        });    }}var formContatos = $('#contatos');if (formContatos.length>0) {    function_ajax_form('#contatos',callbackContatos);}function mask(o, f) {    setTimeout(function() {        var v = mphone(o.value);        if (v != o.value) {            o.value = v;        }    }, 1);}function mphone(v) {    var r = v.replace(/\D/g, "");    r = r.replace(/^0/, "");    if (r.length > 10) {        r = r.replace(/^(\d\d)(\d{5})(\d{4}).*/, "($1) $2-$3");    } else if (r.length > 5) {        r = r.replace(/^(\d\d)(\d{4})(\d{0,4}).*/, "($1) $2-$3");    } else if (r.length > 2) {        r = r.replace(/^(\d\d)(\d{0,5})/, "($1) $2");    } else {        r = r.replace(/^(\d*)/, "($1");    }    return r;}$('#carrega_').click(function(event) {    event.preventDefault();    var usados = $('input[name="usados"]').val();    var atual = $('input[name="atual"]').val();    $.ajax({        url: _dominio+'blog/template/buscanoticia.php',        type: 'POST',        dataType: 'json',        data: {usados: usados, atual:atual},    }).done(function(retorno) {        $('input[name="usados"]').val(retorno.usados);        $('input[name="atual"]').val(retorno.atual);        $('#noticias_load').append(retorno.html).show;        if (!retorno.loadmore){            $('.segura__btn__carregar').remove();        }    });});$('#carrega_cat').click(function(event) {    event.preventDefault();    var usados = $('input[name="usados"]').val();    var atual = $('input[name="atual"]').val();    var categoriaHidden = $('input[name="categoriaHidden"]').val();    $.ajax({        url: _dominio+'blog/template/buscanoticiacomcat.php',        type: 'POST',        dataType: 'json',        data: {usados: usados, atual:atual, categoriaHidden: categoriaHidden},    }).done(function(retorno) {        $('input[name="usados"]').val(retorno.usados);        $('input[name="atual"]').val(retorno.atual);        $('#noticias_load').append(retorno.html).show;        if (!retorno.loadmore){            $('.segura__btn__carregar').remove();        }    });});